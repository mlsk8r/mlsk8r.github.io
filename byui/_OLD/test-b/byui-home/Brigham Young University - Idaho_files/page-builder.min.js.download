var SELECTORS={ARCHIVE:{FILTER:'[data-role="archive-filter"]',CANCEL:'[data-role="cancel-filter"]'},COLLAPSE:'[data-toggle="collapse"]',DATATRIGGER:{PARENT:'[data-trigger="parent"]'},DECISION:{CONTENT:'[data-role="decision-content"]',DETAILS:'[data-role="decision-details"]'},DROPDOWN:'[data-toggle="dropdown"]',ICON:'span[class*="icon-"]',MODALIMAGE:'img[data-toggle="modal"]',ONLINE:{COURSE:{COMPARE:"#compare",DETAILS:"[data-course-code]",ELLIPSIS:'[data-toggle="ellipsis"]',NAME:'td[class*="course-"],th.course-name',LIST:"#course-list",PREFIX:"comp-",SELECT:".course-select>span[class*=icon-]"},REGISTRATION:'[data-listen="registration"]',SEARCH:'[data-search="courses"]'},PAGINATION:"[data-page-target]",RSS:{EVENT:"[data-date]",MORE:'[data-target="rss-events"]',INPUT:'input[data-role="rss-filter"]',FILTER:'[data-role="rss-filter"]:not(input)'},STICKY:{TOP:'[data-stick="top"]'},TABNAV:{ACTIVE:'[data-toggle="tab"].active',TRIGGER:'[data-toggle="tab"]'},TOP:'[data-role="scroll-top"]',WRAP:'span[class*="icon-wrapper"]'},ATTRIBUTES={ARIA:{EXPANDED:"aria-expanded",SELECTED:"aria-selected"},DATA:{PARENT:"data-parent",TARGET:"data-target"},COURSE:{COMPARED:"data-compared"}},BOOL={FALSE:"false",TRUE:"true"},CLASSES={ACTIVE:"active",ELLIPSIS:"course-ellipsis",STICK:"stick"},EVENTS={COLLAPSE:{EXPANDED:"collapse-expanded",CLOSED:"collapse-closed"},CLICK:"click",CHANGE:"change",KEYUP:"keyup",SCROLL:"scroll"},ICONS={ANGLE:{DOWN:"icon-angle-down",UP:"icon-angle-up"},MINUS:"icon-minus",PLUS:"icon-plus",TRIANGLE:{DOWN:"icon-triangle-down",UP:"icon-triangle-up"}},EVENTS_PER_PAGE=10;function newEvent(e){return new CustomEvent(e)}function backToTop(){window.scroll({top:0,left:0,behavior:"smooth"})}function expand(e){if(!e.isExpanded()){var t=e.getAttribute(ATTRIBUTES.DATA.TARGET);e.setAttribute(ATTRIBUTES.ARIA.EXPANDED,BOOL.TRUE),document.getElementById(t).show(),e.focus(),e.matches(SELECTORS.COLLAPSE)&&e.dispatchEvent(newEvent(EVENTS.COLLAPSE.EXPANDED))}}function close(e){if(e.isExpanded()){var t=e.getAttribute(ATTRIBUTES.DATA.TARGET);e.setAttribute(ATTRIBUTES.ARIA.EXPANDED,BOOL.FALSE),document.getElementById(t).hide(),e.matches(SELECTORS.COLLAPSE)&&e.dispatchEvent(newEvent(EVENTS.COLLAPSE.CLOSED))}}function toggleCollapse(e){for(var t=e.isExpanded(),a=document.getElementById(e.getAttribute(ATTRIBUTES.DATA.PARENT)).querySelectorAll(SELECTORS.COLLAPSE),n=0;n<a.length;n++)close(a[n]);t||expand(e)}function toggleDropdown(e){e.isExpanded()?close(e):expand(e)}function toggleSidenavIcon(e){e.toggleClass(ICONS.TRIANGLE.DOWN),e.toggleClass(ICONS.TRIANGLE.UP)}for(var sidenavToggles=document.querySelectorAll('[data-role="sidenav-toggle"]'),i=0;i<sidenavToggles.length;i++)sidenavToggles[i].addEventListener(EVENTS.COLLAPSE.CLOSED,function(e){var t=e.currentTarget;t.isEnabled()&&toggleSidenavIcon(t)}),sidenavToggles[i].addEventListener(EVENTS.COLLAPSE.EXPANDED,function(e){var t=e.currentTarget;t.isEnabled()&&toggleSidenavIcon(t)});function toggleAccordionTab(e){var t=e.querySelector(".accordion-icon"),a=e.parentNode.parentNode;t.toggleClass(ICONS.PLUS),t.toggleClass(ICONS.MINUS),a.toggleClass(CLASSES.ACTIVE)}var accordionTabs=document.querySelectorAll('[data-role="accordion-tab"]');for(i=0;i<accordionTabs.length;i++)accordionTabs[i].addEventListener(EVENTS.COLLAPSE.CLOSED,function(e){var t=e.currentTarget;t.querySelector(".accordion-icon");t.isEnabled()&&toggleAccordionTab(t)}),accordionTabs[i].addEventListener(EVENTS.COLLAPSE.EXPANDED,function(e){var t=e.currentTarget;t.querySelector(".accordion-icon");t.isEnabled()&&toggleAccordionTab(t)});function hideEvents(e){for(var t=document.getElementById(e).querySelectorAll(SELECTORS.RSS.EVENT),a=0;a<t.length;a++)t[a].hide()}function displayEvents(e,t){t=void 0===t?EVENTS_PER_PAGE:t,hideEvents(e);for(var a=document.getElementById(e),n=a.querySelectorAll(SELECTORS.RSS.EVENT),l=n.length,o=a.querySelector(SELECTORS.RSS.MORE),E=0,r=0;r<n.length;r++)E<t&&(E++,n[r].show());l>t?o.show():o.hide()}function filterEvents(e){var t=document.getElementById(e),a=t.querySelector('[data-role="rss-message"]'),n=t.querySelector(SELECTORS.RSS.INPUT),l=t.querySelectorAll(SELECTORS.RSS.EVENT),o=t.querySelector(SELECTORS.RSS.MORE);ShowMoreHits[e]=0,a.hide();var E=n.value;if(E){for(var r=0;r<l.length;r++)l[r].hide();visibleEventsCount=0;for(r=0;r<l.length;r++){E===l[r].getAttribute("data-date")&&(l[r].show(),visibleEventsCount++)}0===visibleEventsCount&&(a.innerHTML="No items to be displayed at the selected date",a.show()),o.hide()}else displayEvents(e)}var ShowMoreHits=[],rssInputs=document.querySelectorAll(SELECTORS.RSS.INPUT);for(i=0;i<rssInputs.length;i++)rssInputs[i].addEventListener(EVENTS.CHANGE,function(e){var t=e.currentTarget;if(t.isEnabled()){var a=t.getAttribute(ATTRIBUTES.DATA.PARENT);document.getElementById(a).querySelector(SELECTORS.RSS.FILTER).click()}});function setTargetPage(e,t,a,n){var l=parseInt(e);return n.active.removeClass(CLASSES.ACTIVE),"First"===e?(l=1,n.previous.nextElementSibling.addClass(CLASSES.ACTIVE)):"Last"===e?(l=a,n.next.previousElementSibling.addClass(CLASSES.ACTIVE)):"Next"===e?(l=t+1,n.active.nextElementSibling.addClass(CLASSES.ACTIVE)):"Previous"===e?(l=t-1,n.active.previousElementSibling.addClass(CLASSES.ACTIVE)):n.trigger.addClass(CLASSES.ACTIVE),l}function displayPagination(e,t,a,n){for(var l=e.querySelectorAll(SELECTORS.PAGINATION),o=0;o<l.length;o++){l[o].show(),l[o].enable();var E=parseInt(l[o].getAttribute("data-page-target"));NaN!==E&&(E<t-2?l[o].hide():E>t+2&&l[o].hide())}t<=1&&(n.previous.disable(),n.first.disable()),t>=a&&(n.last.disable(),n.next.disable())}function displayPage(e,t){for(var a=e.querySelectorAll("[data-page]"),n=0;n<a.length;n++)a[n].hide();var l=e.querySelectorAll('[data-page="'+t+'"]');for(n=0;n<l.length;n++)l[n].show()}function registrationTrack(){var e=s_gi(s_account);e.linkTrackVars="events",e.linkTrackEvents="event21",e.events="event21",e.tl(this,"o","Register Now")}function showEllipsis(e){e.addClass(CLASSES.ELLIPSIS),e.nextElementSibling.show(),e.nextElementSibling.nextElementSibling.show()}function hideEllipsis(e){e.removeClass(CLASSES.ELLIPSIS),e.nextElementSibling.hide(),e.nextElementSibling.nextElementSibling.hide()}function calcEllipsis(e){var t=e.querySelector(".course-description :first-child");console.log("elmt height: "+t.clientHeight),t.clientHeight>45?showEllipsis(t):hideEllipsis(t)}function compareCourse(e){if(console.log("compare"),e.getAttribute(ATTRIBUTES.COURSE.COMPARED)===BOOL.FALSE){e.setAttribute(ATTRIBUTES.COURSE.COMPARED,BOOL.TRUE),e.setAttribute(ATTRIBUTES.ARIA.SELECTED,BOOL.TRUE),(n=e.querySelector(SELECTORS.ONLINE.COURSE.SELECT)).toggleClass(ICONS.PLUS),n.toggleClass(ICONS.MINUS);var t=e.cloneNode(!0),a=SELECTORS.ONLINE.COURSE.PREFIX+t.getAttribute("id");t.setAttribute("id",a),t.querySelector(".course-credits").innerHTML+=" credits",document.querySelector(SELECTORS.ONLINE.COURSE.COMPARE+" > tbody").appendChild(t),calcEllipsis(document.getElementById(a))}else if(e.matches('[id*="comp-"]')){a=e.getAttribute("id").slice(5);(t=document.getElementById(a)).setAttribute(ATTRIBUTES.COURSE.COMPARED,BOOL.FALSE),t.setAttribute(ATTRIBUTES.ARIA.SELECTED,BOOL.FALSE),(n=t.querySelector(SELECTORS.ONLINE.COURSE.SELECT)).toggleClass(ICONS.PLUS),n.toggleClass(ICONS.MINUS),e.remove()}else{var n;e.setAttribute(ATTRIBUTES.COURSE.COMPARED,BOOL.FALSE),e.setAttribute(ATTRIBUTES.ARIA.SELECTED,BOOL.FALSE),(n=e.querySelector(SELECTORS.ONLINE.COURSE.SELECT)).toggleClass(ICONS.PLUS),n.toggleClass(ICONS.MINUS);a=SELECTORS.ONLINE.COURSE.PREFIX+e.getAttribute("id");document.getElementById(a).remove()}}function toggleEllipsis(e){e.innerHTML="Read More"===e.innerHTML?"Read Less":"Read More",e.previousElementSibling.toggleClass("hidden"),e.previousElementSibling.previousElementSibling.toggleClass(CLASSES.ELLIPSIS)}function camelize(e){return e.replace(/(?:^\w|[A-Z]|\b\w|\s+)/g,function(e,t){return 0==+e?"":0==t?e.toLowerCase():e.toUpperCase()})}function searchCourses(){var e=document.querySelector(".course-table");if(console.log(e),null!==e){var t=e.querySelectorAll(".college"),a=e.querySelectorAll(".department"),n=e.querySelectorAll(SELECTORS.ONLINE.COURSE.DETAILS);if(t.length>=1)for(var l=0;l<t.length;l++)t[l].hide();if(a.length>=1)for(l=0;l<a.length;l++)a[l].show();if(n.length>=1)for(l=0;l<n.length;l++)n[l].show();var o=document.getElementById("search-course"),E=null!==o?o.value.toLowerCase():"",r=document.getElementById("search-department"),i=null!==r?r.value:"n/a",s=document.getElementById("search-credits"),S=null!==s?s.value:"n/a",c=document.getElementById("search-availability"),d=null!==c?c.value.toLowerCase():"n/a",g=document.getElementById("search-code"),T=null!==g?camelize(g.value).toLowerCase():"n/a",A=document.getElementById("search-college"),u=null!==A?A.value:"n/a",C=document.getElementById("search-apply-now");return function(e,t,a,n,l,o,E,r,i){if(console.log("coll: "+e+", dept: "+t+", cred: "+a+", disp: "+n+", code: "+l+", search: "+o,"apply: "+i),console.log("# college: "+E.length+", # courses: "+r.length),"n/a"!=e)document.getElementById(e).show();else if(E.length>=1)for(var s=0;s<E.length;s++)E[s].show();if(r.length>=1)for(s=0;s<r.length;s++){if("n/a"!=a){var S=r[s].querySelector(".course-credits");null!==S&&S.textContent!=a&&r[s].hide()}if("n/a"!=n){var c='[data-disp*="'+n+'"]',d=!1;null!==r[s].querySelector(c)&&(d=!0),d||r[s].hide()}if("n/a"!=i&&(r[s].getAttribute("data-apply-now")==i?r[s].show():r[s].hide()),"n/a"!=l)new RegExp(l).test(r[s].getAttribute("data-course-code").toLowerCase())||r[s].hide();if("n/a"!=t&&r[s].getAttribute("data-dept")!=t&&r[s].hide(),""!=o)new RegExp(o).test(r[s].innerHTML.toLowerCase())||r[s].hide()}return hideEmptyDepts()}(u,i,S,d,T,E,t,n,null!==C?C.value:"n/a")}}function hideEmptyDepts(){var e=document.querySelectorAll(".department");if(e.length>=1)for(var t=0;t<e.length;t++){e[t].querySelectorAll(SELECTORS.ONLINE.COURSE.DETAILS+":not(.hidden)").length<1&&e[t].hide()}}function openTab(e){if(!e.isExpanded()){var t=document.getElementById(e.getAttribute(ATTRIBUTES.DATA.TARGET));t.show(),t.setAttribute(ATTRIBUTES.ARIA.SELECTED,BOOL.TRUE),e.addClass(CLASSES.ACTIVE),e.setAttribute(ATTRIBUTES.ARIA.EXPANDED,BOOL.TRUE)}}function closeTab(e){if(e.isExpanded()){var t=document.getElementById(e.getAttribute(ATTRIBUTES.DATA.TARGET));t.hide(),t.setAttribute(ATTRIBUTES.ARIA.SELECTED,BOOL.FALSE),e.removeClass(CLASSES.ACTIVE),e.setAttribute(ATTRIBUTES.ARIA.EXPANDED,BOOL.FALSE)}}function toggleTab(e){if(!e.isExpanded()){var t=document.getElementById(e.getAttribute(ATTRIBUTES.DATA.PARENT)).querySelector(SELECTORS.TABNAV.ACTIVE);console.log(t),closeTab(t),openTab(e)}}function activateModalImage(e){var t=document.getElementById(e.getAttribute(ATTRIBUTES.DATA.TARGET)),a=e.getAttribute("data-img-src"),n=e.getAttribute("data-img-alt"),l=e.getAttribute("data-modal-title"),o=e.getAttribute("data-modal-caption"),E=t.querySelector("img"),r=t.querySelector(".modal-caption");document.getElementById("image-modal-label").innerHTML=l,r.innerHTML=o,E.setAttribute("src",a),E.setAttribute("alt",n)}function toggleDecisionContent(e){var t=e.firstElementChild,a=t.nextElementSibling,n=a.nextElementSibling.firstElementChild;t.toggle(),a.toggle(),n.toggleClass(ICONS.ANGLE.DOWN),n.toggleClass(ICONS.ANGLE.UP)}function toggleDecisionDetails(e){for(var t=e.parentNode.querySelectorAll(SELECTORS.ICON),a=0;a<t.length;a++)t[a].hide();e.querySelector(SELECTORS.ICON).show()}function handleClick(e){var t=e.target,a=t.isEnabled();if(console.log(t),a){for(;t.matches(SELECTORS.ICON)||t.matches(SELECTORS.DATATRIGGER.PARENT);)t=t.parentNode,console.log(t);if(t.matches('[data-trigger="previous"]')&&(t=t.previousElementSibling),t.matches(SELECTORS.TOP)&&(e.preventDefault(),backToTop()),t.matches(SELECTORS.COLLAPSE)&&(e.preventDefault(),toggleCollapse(t)),t.matches(SELECTORS.DROPDOWN)&&(e.preventDefault(),toggleDropdown(t)),t.matches(SELECTORS.RSS.FILTER)&&(e.preventDefault(),filterEvents(t.getAttribute(ATTRIBUTES.DATA.PARENT))),t.matches(SELECTORS.RSS.MORE)){e.preventDefault();var n=t.getAttribute(ATTRIBUTES.DATA.PARENT);null==ShowMoreHits[n]&&(ShowMoreHits[n]=0),ShowMoreHits[n]++,displayEvents(n,10*(ShowMoreHits[n]+1))}if(t.matches(SELECTORS.PAGINATION)){e.preventDefault();var l=document.getElementById(t.getAttribute(ATTRIBUTES.DATA.PARENT));links={active:l.querySelector(SELECTORS.PAGINATION+"."+CLASSES.ACTIVE),first:l.querySelector('[data-page-target="First"]'),last:l.querySelector('[data-page-target="Last"]'),next:l.querySelector('[data-page-target="Next"]'),previous:l.querySelector('[data-page-target="Previous"]'),trigger:t},numPages=l.querySelectorAll(SELECTORS.PAGINATION).length-4,console.log("num Pages: "+numPages),activePage=parseInt(links.active.getAttribute("data-page-target")),targetPage=t.getAttribute("data-page-target"),console.log("target: "+targetPage),targetPage=setTargetPage(targetPage,activePage,numPages,links),console.log("target parsed: "+targetPage),displayPagination(l,targetPage,numPages,links),displayPage(l,targetPage),bLazy.revalidate()}if(t.matches(SELECTORS.ARCHIVE.FILTER)){e.preventDefault();l=document.getElementById(t.getAttribute(ATTRIBUTES.DATA.PARENT)),n=t.getAttribute("data-month")||t.getAttribute("data-category");for(var o=l.querySelectorAll("[data-month][data-category]"),E=0;E<o.length;E++)o[E].getAttribute("data-month")===n?o[E].show():o[E].getAttribute("data-category").includes(n)?o[E].show():o[E].hide();var r=l.querySelectorAll(SELECTORS.PAGINATION);for(E=0;E<r.length;E++)r[E].hide();bLazy.revalidate()}if(t.matches(SELECTORS.ARCHIVE.CANCEL)){e.preventDefault();var i=(l=document.getElementById(t.getAttribute(ATTRIBUTES.DATA.PARENT))).querySelector('[data-page-target="First"]');i.enable(),i.click(),bLazy.revalidate()}t.matches(SELECTORS.ONLINE.REGISTRATION)&&registrationTrack(),t.matches(SELECTORS.ONLINE.COURSE.NAME)&&(t=t.parentNode,console.log(t)),t.matches(SELECTORS.ONLINE.COURSE.DETAILS)&&compareCourse(t),t.matches(SELECTORS.ONLINE.COURSE.ELLIPSIS)&&toggleEllipsis(t),t.matches(SELECTORS.TABNAV.TRIGGER)&&toggleTab(t),t.matches(SELECTORS.MODALIMAGE)&&activateModalImage(t),t.matches(SELECTORS.DECISION.CONTENT)&&toggleDecisionContent(t),t.matches(SELECTORS.DECISION.DETAILS)&&toggleDecisionDetails(t)}}function handleChange(e){var t=e.target,a=t.isEnabled();console.log(t),a&&t.matches(SELECTORS.ONLINE.SEARCH)&&searchCourses()}function handleScroll(e){var t=document.querySelector(SELECTORS.STICKY.TOP);if(null!==t){var a=window.scrollY,n=document.body.hasClass(CLASSES.STICK),l=t.nextElementSibling.nextElementSibling.offsetTop;a>=l&&!n&&(document.body.addClass(CLASSES.STICK),t.show()),a<=l&&n&&(document.body.removeClass(CLASSES.STICK),t.hide())}}document.addEventListener(EVENTS.CLICK,handleClick),document.addEventListener(EVENTS.CHANGE,handleChange),document.addEventListener(EVENTS.KEYUP,handleChange),document.addEventListener(EVENTS.SCROLL,handleScroll),searchCourses(),hideEmptyDepts();